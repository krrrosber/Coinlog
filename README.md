# Капиталистик

Финансовый трекер для мониторинга расходов и доходов.  
Позволяет относить траты к категориям, создавать категории, смотреть статистику за день, месяц, год, выбранный период или категорию.  
На первом этапе реализован ручной ввод данных. В будущем планируется добавление импорта из CSV и интеграция с API банков.

---

## Структура проекта

### Класс `Category`
**Поля:**
- `int id` — уникальный идентификатор категории  
- `string name` — название категории  
- `enum Type { Expense, Income } type` — тип категории (расход или доход)  

**Методы:**
- Сеттеры/геттеры для полей  
- Создать категорию  
- Переименовать категорию  
- Удалить категорию  

---

### Класс `Transaction`
**Поля:**
- `int64_t id` — уникальный идентификатор транзакции  
- `std::chrono::system_clock::time_point timestamp` — время операции  
- `int64_t amount_cents` — сумма в копейках  
- `int category_id` — категория транзакции  
- `string note` — заметка (например: сыр, бензин, одежда)  

**Методы:**
- Сеттеры/геттеры для всех полей  

---

### Класс `DatabaseManager`
**Поля:**
- `Transaction transaction` — объект транзакции  
- `string dbFilePath` — путь к базе данных  

**Методы:**
- `void open(path)` — открыть соединение с базой  
- `void close()` — закрыть соединение  
- `bool addTransaction(const Transaction&)` — добавить транзакцию в SQLite  
- `std::vector<Transaction> queryTransactions(from, to, optional category_id)` — выборка транзакций  
- `void pruneOlderThan(time_t)` — удалить старые записи  

---

### Класс `Analytics`
**Поля:**
- `std::vector<Transaction> activities` — список транзакций  
- `std::unordered_map<Category, int64_t> totals` — суммы по категориям  

**Методы:**
- `map<category_id, int64_t> getDailySum()` — сумма за день  
- `map<category_id, int64_t> getWeekSum()` — сумма за неделю  
- `map<category_id, int64_t> getMonthSum()` — сумма за месяц  
- `map<category_id, int64_t> getPeriodSum(from, to)` — сумма за период  

---

### Класс `DataExchangeUI`
**Описание:** класс для обмена данными между логикой приложения и пользовательским интерфейсом.  
**Поля:** приватные (сигналы для списков и кнопок).  
**Методы:** будут уточняться в процессе разработки.  

---

### Класс `MainWindow`
**Описание:** главный экран приложения. Управляет взаимодействием пользователя с данными.  

---

## Разделение потоков
1. Поток работы с базой данных  
2. Поток пользовательского интерфейса  
3. Поток вычислений  

---

## Планы на будущее
- Импорт/экспорт данных через CSV  
- Интеграция с API банков  
- Визуализация графиков и диаграмм  
